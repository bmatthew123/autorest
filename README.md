# Autorest
A simple server that automatically creates a RESTful interface to a database. Currently only MySQL is supported. Pull requests are welcome to add support for other databases.

## How It Works
Autorest will connect to a database, parse the schema and start a server that will create a RESTful interface. It builds queries in a secure manner to prevent SQL injection. Each table will, by default, correspond to one endpoint. For example, if our database has two tables, `users` (columns id, first_name, last_name) and `products` (columns id, name), **autorest** will create the following endpoints:

- host:port/rest/users
- host:port/rest/products

Each endpoint supports the 4 main HTTP verbs, GET, POST, PUT, and DELETE. JSON is expected for the request body of POST and PUT requests. The specific HTTP calls that **autorest** will then respond to are the following:

- GET host:port/rest/users - Gets all users
- GET host:port/rest/users/:id - Get a single user
- POST host:port/rest/users - Create a new user
- PUT host:port/rest/users/:id - Update a user
- DELETE host:port/rest/users/:id - Delete a user

## Other Functionality
- You may not want some tables to have a RESTful interface, these tables can easily be marked for exclusion.
- You can also serve static files (served at `{server}/static/...`)
- Since it is likely that other endpoints will be needed other than those generated by **autorest**, you can register additional handlers to support other arbitrary URLs
  - You can declare handlers for paths that begin with `"/rest/..."`, but it must be more than just `"/rest/"`
- Running a server with TLS is also supported

## Examples
### Setup the Server
```
func main() {
  credentials := autorest.DatabaseCredentials{
    Username: "root",
    Password: "admin",
    Host: "localhost",
    Name: "my_db",
    Port: "3306"
  }
  server := autorest.NewServer(credentials)
  server.Run("80") // or 
}
```
### Exclude Tables
```
func main() {
  credentials := autorest.DatabaseCredentials{
    Username: "root",
    Password: "admin",
    Host: "localhost",
    Name: "my_db",
    Port: "3306"
  }
  server := autorest.NewServer(credentials)
  server.ExcludeTables("my_secret_table", "some_other_table")
  server.Run("80")
}
```
### Serve Static Files
```
func main() {
  credentials := autorest.DatabaseCredentials{
    Username: "root",
    Password: "admin",
    Host: "localhost",
    Name: "my_db",
    Port: "3306"
  }
  server := autorest.NewServer(credentials)
  server.ServeStaticFilesFromDirectory("./static")
  server.Run("80")
}
```
### Handle Other URLs
```
func main() {
  credentials := autorest.DatabaseCredentials{
    Username: "root",
    Password: "admin",
    Host: "localhost",
    Name: "my_db",
    Port: "3306"
  }
  server := autorest.NewServer(credentials)
  server.RegisterHandler("/some/endpoint", func(w http.ResponseWriter, r *http.Request) {
    // Handle endpoint here...
  })
  server.Run("80")
}
```
